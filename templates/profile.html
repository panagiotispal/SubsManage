<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Î ÏÎ¿Ï†Î¯Î»</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="app-container">
        
        <nav class="sidebar">
            <div class="sidebar-brand">
                <i class="fas fa-bolt text-primary me-2"></i> SubsManage
            </div>
            <div class="sidebar-menu">
                <a href="{{ url_for('home') }}">
                    <i class="fas fa-home me-3"></i> Î‘ÏÏ‡Î¹ÎºÎ®
                </a>
                <a href="{{ url_for('add_subscription') }}">
                    <i class="fas fa-plus-circle me-3"></i> Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·
                </a>
                <a href="{{ url_for('profile') }}" class="active">
                    <i class="fas fa-user-cog me-3"></i> Î ÏÎ¿Ï†Î¯Î»
                </a>
                <a href="{{ url_for('logout') }}" class="mt-5 text-danger">
                    <i class="fas fa-sign-out-alt me-3"></i> Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·
                </a>
            </div>
        </nav>

        <main class="main-content">
            <a href="{{ url_for('home') }}" class="text-decoration-none text-muted mb-4 d-inline-block">
                <i class="fas fa-arrow-left me-2"></i> Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®
            </a>

            <div class="row justify-content-center">
                <div class="col-md-8 col-lg-6">
                    
                    {% with messages = get_flashed_messages() %}
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-success d-flex align-items-center mb-4" role="alert">
                                    <i class="fas fa-check-circle me-2"></i>
                                    <div>{{ message }}</div>
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}

                    <div class="main-card">
                        <h2 class="mb-4 text-center">ğŸ‘¤ Î¤Î¿ Î ÏÎ¿Ï†Î¯Î» Î¼Î¿Ï…</h2>
                        
                        <form method="POST" enctype="multipart/form-data">
                            
                            <div class="text-center mb-4">
                                <div class="profile-upload-container">
                                    <img src="{{ url_for('static', filename='uploads/' + user.profile_pic) }}" 
                                         class="profile-edit-img" 
                                         id="profilePreview"
                                         onerror="this.src='{{ url_for('static', filename='uploads/default.png') }}'">
                                    
                                    <label for="profile_pic" class="upload-btn">
                                        <i class="fas fa-camera"></i>
                                    </label>
                                    <input type="file" name="profile_pic" id="profile_pic" accept="image/*" onchange="previewImage(event)" style="display: none;">
                                </div>
                                <p class="text-muted small mt-2">Î Î¬Ï„Î± Ï„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ± Î³Î¹Î± Î±Î»Î»Î±Î³Î®</p>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">ÎŒÎ½Î¿Î¼Î± Î§ÏÎ®ÏƒÏ„Î·</label>
                                <input type="text" name="username" class="form-control" value="{{ user.username }}" required>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" name="email" class="form-control" value="{{ user.email }}" required>
                            </div>

                            <hr class="border-secondary my-4">
                            <h5 class="mb-3 text-muted">Î‘Î»Î»Î±Î³Î® ÎšÏ‰Î´Î¹ÎºÎ¿Ï (Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</h5>

                            <div class="mb-4">
                                <label class="form-label">ÎÎ­Î¿Ï‚ ÎšÏ‰Î´Î¹ÎºÏŒÏ‚</label>
                                <input type="password" name="password" class="form-control" placeholder="Î†ÏƒÎµ ÎºÎµÎ½ÏŒ Î±Î½ Î´ÎµÎ½ Î¸ÎµÏ‚ Î±Î»Î»Î±Î³Î®">
                            </div>

                            <button type="submit" class="btn btn-primary w-100 py-3">
                                <i class="fas fa-save me-2"></i> Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î‘Î»Î»Î±Î³ÏÎ½
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function(){
                const output = document.getElementById('profilePreview');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>