<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÎÎ­Î± Î£Ï…Î½Î´ÏÎ¿Î¼Î®</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="app-container">
        <nav class="sidebar">
            <div class="sidebar-brand"><i class="fas fa-bolt text-primary me-2"></i> SubsManage</div>
            <div class="sidebar-menu">
                <a href="{{ url_for('home') }}"><i class="fas fa-home me-3"></i> Î‘ÏÏ‡Î¹ÎºÎ®</a>
                <a href="{{ url_for('add_subscription') }}" class="active"><i class="fas fa-plus-circle me-3"></i> Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</a>
                <a href="{{ url_for('profile') }}"><i class="fas fa-user-cog me-3"></i> Î ÏÎ¿Ï†Î¯Î»</a>
                <a href="{{ url_for('logout') }}" class="mt-5 text-danger"><i class="fas fa-sign-out-alt me-3"></i> Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·</a>
            </div>
        </nav>

        <main class="main-content">
            <a href="{{ url_for('home') }}" class="text-decoration-none text-muted mb-4 d-inline-block">
                <i class="fas fa-arrow-left me-2"></i> Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®
            </a>
            <div class="row">
                <div class="col-md-8 col-lg-6">
                    <div class="main-card">
                        <h2 class="mb-4">âœ¨ ÎÎ­Î± Î£Ï…Î½Î´ÏÎ¿Î¼Î®</h2>
                        <form method="POST" action="/add">
                            
                            <div class="mb-4">
                                <label class="form-label">ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±</label>
                                <select name="category" id="categorySelect" class="form-select" onchange="updateServices()">
                                    <option value="" disabled selected>Î•Ï€Î¯Î»ÎµÎ¾Îµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±...</option>
                                    <option value="Entertainment">ğŸ¬ Î”Î¹Î±ÏƒÎºÎ­Î´Î±ÏƒÎ·</option>
                                    <option value="Work">ğŸ’¼ Î•ÏÎ³Î±ÏƒÎ¯Î± & Tools</option>
                                    <option value="Utilities">ğŸ  Î£Ï€Î¯Ï„Î¹ & Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Î¯</option>
                                    <option value="Health">ğŸ’ª Î¥Î³ÎµÎ¯Î± & Î“Ï…Î¼Î½Î±ÏƒÏ„Î¹ÎºÎ®</option>
                                    <option value="Education">ğŸ“ Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ·</option>
                                    <option value="Other">ğŸ“¦ Î†Î»Î»Î¿</option>
                                </select>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Î¥Ï€Î·ÏÎµÏƒÎ¯Î±</label>
                                <input type="text" name="name" id="serviceInput" class="form-control" list="serviceOptions" 
                                       placeholder="Î•Ï€Î¯Î»ÎµÎ¾Îµ Î® Î³ÏÎ¬ÏˆÎµ..." required onchange="checkPackages()">
                                <datalist id="serviceOptions"></datalist>
                            </div>

                            <div class="mb-4" id="packageContainer" style="display: none;">
                                <label class="form-label text-warning"><i class="fas fa-tags me-1"></i> Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Î Î±ÎºÎ­Ï„Î±</label>
                                <select id="packageSelect" class="form-select" onchange="applyPackagePrice()">
                                    <option value="" selected>Î•Ï€Î¯Î»ÎµÎ¾Îµ Ï€Î±ÎºÎ­Ï„Î¿ (Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</option>
                                </select>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Î¤Î¹Î¼Î® (â‚¬)</label>
                                <input type="number" step="0.01" name="price" id="priceInput" class="form-control" placeholder="10.99" required>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <label class="form-label">ÎšÏÎºÎ»Î¿Ï‚</label>
                                    <select name="billing_cycle" class="form-select">
                                        <option value="Monthly">ÎœÎ·Î½Î¹Î±Î¯Î±</option>
                                        <option value="Yearly">Î•Ï„Î®ÏƒÎ¹Î±</option>
                                        <option value="Weekly">Î•Î²Î´Î¿Î¼Î±Î´Î¹Î±Î¯Î±</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label class="form-label">Î—Î¼. ÎˆÎ½Î±ÏÎ¾Î·Ï‚</label>
                                    <input type="date" name="start_date" class="form-control" required>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Î›Î¯ÏƒÏ„Î± Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ Î±Î½Î¬ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
        const servicesData = {
            'Entertainment': ['Netflix', 'Spotify', 'Disney+', 'YouTube Premium', 'Apple Music', 'Hulu', 'PlayStation Plus'],
            'Work': ['ChatGPT Plus', 'GitHub Copilot', 'LinkedIn Premium', 'Slack', 'Zoom', 'Adobe Creative Cloud', 'Microsoft 365'],
            'Utilities': ['Vodafone', 'Cosmote', 'Nova', 'Î”Î•Î—', 'Internet'],
            'Health': ['Gym', 'MyFitnessPal', 'Headspace'],
            'Education': ['Udemy', 'Coursera', 'Duolingo'],
            'Other': ['Amazon Prime', 'Skroutz Plus']
        };

        // Î¤Î™ÎœÎŸÎšÎ‘Î¤Î‘Î›ÎŸÎ“ÎŸÎ£ (Î•Î´Ï Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹Ï‚ Ï„Î± Ï€Î±ÎºÎ­Ï„Î±)
        const pricingPackages = {
            'Netflix': [
                { name: 'Basic (SD)', price: 7.99 },
                { name: 'Standard (FHD)', price: 10.99 },
                { name: 'Premium (4K)', price: 13.99 }
            ],
            'Spotify': [
                { name: 'Individual', price: 7.99 },
                { name: 'Duo', price: 10.49 },
                { name: 'Family', price: 12.99 },
                { name: 'Student', price: 4.49 }
            ],
            'YouTube Premium': [
                { name: 'Individual', price: 8.49 },
                { name: 'Family', price: 12.99 },
                { name: 'Student', price: 4.99 }
            ],
            'Disney+': [
                { name: 'Monthly', price: 10.99 },
                { name: 'Yearly', price: 109.90 } // Î ÏÎ¿ÏƒÎ¿Ï‡Î®: Î•Î´Ï Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î±Î»Î»Î¬Î¶ÎµÎ¹ ÎºÎ±Î¹ Î¿ ÎšÏÎºÎ»Î¿Ï‚ (Advanced)
            ],
            'Apple Music': [
                { name: 'Individual', price: 7.49 },
                { name: 'Family', price: 11.49 }
            ],
            'PlayStation Plus': [
                { name: 'Essential', price: 8.99 },
                { name: 'Extra', price: 13.99 },
                { name: 'Premium', price: 16.99 }
            ],
            'ChatGPT Plus': [
                { name: 'Plus Subscription', price: 22.00 } // Î ÎµÏÎ¯Ï€Î¿Ï… Î¼Îµ Ï†ÏŒÏÎ¿Ï…Ï‚
            ]
        };

        function updateServices() {
            const categorySelect = document.getElementById('categorySelect');
            const dataList = document.getElementById('serviceOptions');
            const selectedCategory = categorySelect.value;
            
            dataList.innerHTML = '';
            if (servicesData[selectedCategory]) {
                servicesData[selectedCategory].forEach(service => {
                    const option = document.createElement('option');
                    option.value = service;
                    dataList.appendChild(option);
                });
            }
        }

        // Î•Î»Î­Î³Ï‡ÎµÎ¹ Î±Î½ Î· Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Ï€Î¿Ï… Î­Î³ÏÎ±ÏˆÎµ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î­Ï‡ÎµÎ¹ Ï€Î±ÎºÎ­Ï„Î±
        function checkPackages() {
            const serviceName = document.getElementById('serviceInput').value;
            const packageContainer = document.getElementById('packageContainer');
            const packageSelect = document.getElementById('packageSelect');
            
            // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Ï‰Î½
            packageSelect.innerHTML = '<option value="" selected>Î•Ï€Î¯Î»ÎµÎ¾Îµ Ï€Î±ÎºÎ­Ï„Î¿ (Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</option>';
            
            // Î¨Î¬Ï‡Î½Î¿Ï…Î¼Îµ Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± ÏƒÏ„Î¿Î½ Ï„Î¹Î¼Î¿ÎºÎ±Ï„Î¬Î»Î¿Î³Î¿ (Î±Î³Î½Î¿ÏÎ½Ï„Î±Ï‚ Ï€ÎµÎ¶Î¬/ÎºÎµÏ†Î±Î»Î±Î¯Î±)
            // Î’ÏÎ¯ÏƒÎºÎ¿Ï…Î¼Îµ Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ ÎºÎ»ÎµÎ¹Î´Î¯ (Ï€.Ï‡. Î±Î½ Î³ÏÎ¬ÏˆÎµÎ¹ "netflix" Î½Î± Î²ÏÎµÎ¹ Ï„Î¿ "Netflix")
            const foundKey = Object.keys(pricingPackages).find(key => key.toLowerCase() === serviceName.toLowerCase());

            if (foundKey) {
                // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Î¿Ï… ÎºÎ¿Ï…Ï„Î¹Î¿Ï
                packageContainer.style.display = 'block';
                
                // Î“Î­Î¼Î¹ÏƒÎ¼Î± Î¼Îµ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚
                pricingPackages[foundKey].forEach(pkg => {
                    const option = document.createElement('option');
                    option.value = pkg.price; // Î— Ï„Î¹Î¼Î® Î¼Ï€Î±Î¯Î½ÎµÎ¹ ÏƒÏ„Î¿ value
                    option.text = `${pkg.name} - ${pkg.price}â‚¬`;
                    packageSelect.appendChild(option);
                });
            } else {
                // Î‘Ï€ÏŒÎºÏÏ…ÏˆÎ· Î±Î½ Î´ÎµÎ½ Î²ÏÎµÎ¸ÎµÎ¯
                packageContainer.style.display = 'none';
            }
        }

        // ÎŒÏ„Î±Î½ Î´Î¹Î±Î»Î­Î¾ÎµÎ¹ Ï€Î±ÎºÎ­Ï„Î¿, ÎµÎ½Î·Î¼ÎµÏÏÎ½ÎµÎ¹ Ï„Î·Î½ Ï„Î¹Î¼Î®
        function applyPackagePrice() {
            const packageSelect = document.getElementById('packageSelect');
            const priceInput = document.getElementById('priceInput');
            
            if (packageSelect.value) {
                priceInput.value = packageSelect.value;
            }
        }
    </script>
</body>
</html>